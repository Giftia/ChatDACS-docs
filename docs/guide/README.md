# 使用说明

<table width="100%" border="0">
  <tr>
  <td style="width:80%;vertical-align:top;">
    <h1 align="center">
      <img src="https://repository-images.githubusercontent.com/171253757/27be1b16-8dbb-41ba-90b5-4b28157f3def" width="200" height="200" alt="ChatDACS"/><br/>
      星野夜蝶<br/>
      Hoshino Yedie<br/>
    </h1>
    <h2 align="center">
      沙雕Ai聊天系统 ChatDACS (Chatbot : shaDiao Ai Chat System)
    </h2>
    <p align="center">
      一个简单的机器人框架，支持接入哔哩哔哩直播，具备完全功能的web网页控制台。<br/>
      技术栈：语言 —— JavaScript，Web框架 —— Express，前端组件库 —— layui。<br/>
      画师：塘李<br/>
      <br/>
      示例 DEMO：<a href="http://110.42.221.72/" target="_blank">http://110.42.221.72/</a><br/>
      语录来自小夜：<a href="https://github.com/Giftia/Project_Xiaoye" target="_blank">github.com/Giftia/Project_Xiaoye</a>
      <br>
    </p>
  </td>

  <td style="width:20%;vertical-align:top;">
    <img src="https://i.loli.net/2021/08/25/sILl6XREJMDPAmt.png" width="200" alt="stand" />
    <p align="center">
      星野夜蝶 立绘
    </p>
  </td>
  </tr>
</table>

<p align="center">
  <a href="https://stats.uptimerobot.com/JYr8kI8jqg"><img src="https://img.shields.io/uptimerobot/ratio/m783632550-7da46d24226cb151b978c810?label=%E5%AD%98%E6%B4%BB%E7%8E%87&style=for-the-badge" alt="Uptime(30 days)" /></a>
  &nbsp;
  <a href="http://110.42.221.72/"><img src="https://img.shields.io/website?label=demo&style=for-the-badge&up_message=online&url=http://110.42.221.72/" alt="Demo" /></a>
  &nbsp;
  <a href="https://github.com/Giftia/ChatDACS/actions"><img alt="GitHub Workflow Status" src="https://img.shields.io/github/workflow/status/Giftia/ChatDACS/Compile%20ChatDACS%20for%20Windows?label=%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA&style=for-the-badge"></a>
  &nbsp;
  <img src="https://img.shields.io/github/license/Giftia/ChatDACS?label=%E5%BC%80%E6%BA%90%E8%AE%B8%E5%8F%AF&style=for-the-badge" alt="License" />
  &nbsp;
  <img src="https://img.shields.io/github/languages/code-size/Giftia/ChatDACS?label=%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%B0%8F&style=for-the-badge" alt="Code size" />
</p>

---

## 😘 写在最前面 Hi

在线体验地址：[沙雕 Ai 聊天系统](http://110.42.221.72/)

如有任何疑问、建议或者需要联系我，请加群 [【星野夜蝶 粉丝群】 QQ 群 120243247 ](https://jq.qq.com/?_wv=1027&k=ovqyydCe)

对于普通用户，推荐您直接使用官方免费的公共小夜 QQ 账号：1648468212（不定时会被疼讯封号 7 天），邀请小夜入群即可，我会不定期批准请求。

你也可以加入粉丝群，群里有不少群友自发个人部署的第三方小夜，你可以申请使用群友搭建的小夜。

但更推荐您使用私人部署，私人部署的好处都有啥：

- 保护您的隐私，BOT 完全属于您，我无法得知您 BOT 的任何信息（我甚至无法知道您部署了一个私人 BOT）
- 高可用度，稳定的功能，不会因为公共小夜离线而无法运行；独立的词库，不会出现 ky 的回复
- 可自行定制 BOT 账号的头像、名字、配置，甚至是自己改造功能
- 减轻我的服务器负担，让公共小夜活得更久，可循环利用
- 通过搭建流程体验，学习一门先进的技术，很 cool，很极客

私人部署教程请点击跳转至 [部署说明](/deploy/) 章节。

---

## 💝 小夜的成长历程 History

小夜（Project_Xiaoye）是一个非盈利的用于娱乐的 QQ 机器人计划。由运营方 Giftina & NijiharaTsubasa 共同维护运营。运营使用的 QQ 是 小夜 `1648468274`。但是由于某些不可抗力导致小夜永久停止运营。所以随后启用了备用 QQ 小小夜 `1648468212` 接管运营。由于小夜和小小夜的思维核心（代码和数据）都是同一套，所以基本上相当于是无缝迁移过去了。

小夜的构思原型来源于当时另一个有趣的 QQ 机器人：丫丫（SoniaRobot），同一段时期还有不少优秀的伙伴，比如猫娘计划等等。小夜正式运营至今已经是第 7 个年头。 其中陆陆续续也收到了不少喜欢小夜的玩家的投食，让小夜得以运营了下去。小夜一大特色是开放的对话教学，并且在优秀的聊天算法加成下，养成了由 2w+用户调教练就的嘴臭词库，所以基本上小夜的日常就是怼天怼怼地怼空气。这也是不少玩家喜欢小夜的原因。因其毒舌的特点，经常会被玩家们亲切地称呼为夜爹。 感谢玩家的提议，这也是后来决定将小夜出道名定为 星野夜蝶 的原因。

在最开始的 V0 版本，小夜一直是以通过不断往里面塞社区共享的现成的插件为生。随着主要开发者 NijiharaTsubasa 的加入，我们将小夜移植到了神一般的 node.js 平台，进行了大规模的重写更新迭代，可以非常方便地自己来写插件添加功能了。在很长一段稳定运营期间，小夜由 V1 迭代到了 V3。但是这几代后端都是基于 qq 机器人框架酷 Q 框架进行开发的，由于 2020 年酷 Q 的停止运营，小夜不得不随之停止了运营。

停止运营后，作为对小夜玩家的弥补措施，我们上线了一个 web 版的小夜聊天界面 chatdacs.giftia.moe 以供玩家缅怀。在一段萎靡期后，我们试着在 web 版小夜的基础上与 go-cqhttp 进行了对接，作为重写的 V3 分支，并进行了运营测试，虽然这个分支代码因为是基于 web 版续写的所以写得很挫，发现运行效果相当不错。所以我们决定在小夜 V4 正式版本出来之前，暂时使用这个 V3 分支进行补偿性运营。

在运营了一段时间后，我们一拍脑袋决定安排小夜以昵称 星野夜蝶 作为 B 站虚拟主播出道。中之人由 [ACCESS DENINED] 和 小夜 同时担任。这个决定其实也是很久以前就有提议的。虽然这个提议基本上是闹着玩的，效果肯定也不会很好，而且也有很多做得更好的同类的产品如 [Bilibili-MagicalDanmaku](github.com/iwxyi/Bilibili-MagicalDanmaku) ，所以这个策划其实也是一次试水。敬请等待星野夜蝶爹的诞生吧。

星野夜蝶直播间：[https://live.bilibili.com/24230873](https://live.bilibili.com/24230873)

---

## ✨ 功能与特性 Features

- 完善的 web 端聊天界面与各种奇奇怪怪的功能 `Nice H5 UI and some funny functions`
- 无限制的在线聊天 `Unlimited chatroom`
- 与经过 2w+ 用户调教养成的人工智能机器人小夜实时聊天 `Chat with Ai Xiaoye`
- 令人激动的、实用的在线涩图功能 `🈲`
- web 端图片、视频与文件分享 `Share your images, videos and files on webEnd`
- 与 go-cqhttp 对接，实现了 qq 机器人小夜 `Connectable with go-cqhttp`
- 简单好用的插件系统 `Easy Use Plugins System`
- 支持接入哔哩哔哩直播间 `Support Bilibili Live`
- 支持接入 QQ 频道 `Support QQ Guild`
- 即将支持接入 Telegram `Support Telegram(Coming Soon)`
- 即将发布哔哩哔哩直播互动游戏 `Bilibili Live Game(Coming Soon)`

---

## 💬 功能指令介绍 Commands

### 在所有终端都可用的功能：

| 使用例                                                                                                                       | 预期返回                                                                                                                                                      | 功能描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| :--------------------------------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 画师算命                                                                                                                     | 你是一个迪士尼风格画师，最喜欢画美少女，而且找不到工作，然而因为画得太过和谐而被举报，还因为这件事在微博上有了50796个粉丝，做了49年画师，最后成为了魔法少女。 | avg小说模板，由一段段随机语料拼凑成一段完整的小故事，可以参考示例写法自由扩展，写简单的随机小故事。                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 说不出话 ？                                                                                                                  | 哇！小夜学会啦！小夜可能在说不出话的时候说 ？ 噢                                                                                                              | balabala敷衍教学，教给小夜一些比较通用的回复。对于一些难以回复的对话，小夜的词库中没有搜索到回复的时候，小夜会随机回复这些回复作为敷衍，回复了，但完全没有回复的意义。                                                                                                                                                                                                                                                                                                                                                                   |
| 推送我晚上要手冲                                                                                                             | 好的，已经推送到微信，你晚上要手冲                                                                                                                            | 将指定格式的消息推送至微信息知指定频道，适合传送消息至微信。                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 提醒我晚上要手冲                                                                                                             | 好的，我会提醒你晚上要手冲                                                                                                                                    | 计划提醒功能，会在指定时刻提醒你。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 问：HELLO 答：WORLD                                                                                                          | 哇!小夜学会啦!对我说: HELLO 试试吧，小夜有可能会回复 WORLD 噢                                                                                                 | 添加一组新的聊天回复，抄板于虹原翼版小夜v3教学系统。来调教小夜说话吧！在优秀的聊天算法加成下，帮助养成由数万用户调教练就的嘴臭词库。当小夜收到含有 `关键词` 的语句时便会有几率触发回复。若该关键词有多个回复，将会随机选择一个回复。支持图片问答。注意！冒号是中文全角的 `：`，而不是英文半角的 `:`，并且在 `关键词` 和 `答：` 之间有一个空格。注意注意！如果像这样 `问：小夜的主人到底是谁呀 答：是你呀` 直接教完整的一句话的话是很难有效触发的，这就很考验你应该如何选择关键词了。像上面那个例子，更好的教学是： `问：主人 答：是你呀` |
| cos图                                                                                                                        | [一张cos图]                                                                                                                                                   | 在普通限度的尺度下发送一张合法的 cos 三次元图, 图片来源哔哩哔哩cos专栏。                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| cp 小夜 小雫                                                                                                                 | 小夜，小雫，你们的爱情是什么样子？                                                                                                                            | cp文生成器，生成一段简单的 cp 文。简简单单，就是最好的爱。语料来自 https://github.com/mxhcpstories/mxh-cp-stories/blob/master/src/assets/story.json                                                                                                                                                                                                                                                                                                                                                                                      |
| 赛博朋克                                                                                                                     | 大明湖畔位于哪个城市？ 请按如下格式回答: 赛博朋克 你的答案                                                                                                    | 非常赛博朋克的百科知识问答题                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 名场面 不能逃避                                                                                                              | 原作：福音战士新剧场版：序 不能逃避…不能逃避…不能逃避… 不能逃避…不能逃避…不能逃避… 不能逃避                                                                   | 根据字幕台词搜索名场面出处，原作：https://github.com/windrises/dialogue.moe                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 报错 插件爆炸了                                                                                                              | 谢谢您的报错，小夜已经把您的报错信息 插件爆炸了 发给了小夜开发群120243247啦                                                                                   | 向小夜开发组报错消息，消息会实时转达到小夜开发成员                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 最新本子                                                                                                                     | [返回仓库的随机最新投稿]                                                                                                                                      | 从 https://cangku.icu/feed 获取最新投稿                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 黑白图 当你凝望神圣手雷的时候，神圣手雷也在凝望你 あなたが神圣手雷を見つめるとき、神圣手雷もあなたを見つめています[图片]     | [一张黑白生草图]                                                                                                                                              | 生成一张黑白生草图。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| /help                                                                                                                        | 当前插件列表和使用示例：                                                                                                                                      | 会回复系统当前可用插件列表，描述插件版本和对应的使用示例。                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 人生重开                                                                                                                     | [人生重开的结果]                                                                                                                                              | 一个人生重开模拟器，区别于原作，该版本非常真实。原作 https://github.com/VickScarlet/lifeRestart                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 今天不带套                                                                                                                   | 小夜温馨提示您: 今日不戴套，小小夜酱 金牛座，属兔，2041年高考，一本机率约43%                                                                                  | 2018年七夕节彩蛋功能，让小夜帮你计算今天不带套的结果，仅供娱乐。                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 喵嗷嗷嗷嗷呜~嗷呜喵嗷喵嗷嗷~嗷嗷嗷~                                                                                          | 喵~                                                                                                                                                           | 可以将文本加密为 `喵嗷呜` 格式的喵语，也可将喵语解密成原始文本。解密不需要猫语前缀，直接原样发送即可。原作 https://github.com/ezshine/chrome-extension-catroom                                                                                                                                                                                                                                                                                                                                                                           |
| /ping                                                                                                                        | Pong!                                                                                                                                                         | PingPong，最基础的响应插件，可基于本插件学习插件的开发。该插件实现了一个可以测试小夜的连通性的功能。                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| /迫害 上原步梦 是我，是我先，明明都是我先来的……接吻也好，拥抱也好，还是喜欢上那家伙也好。                                    | [一张迫害生草图]                                                                                                                                              | 让小夜来制作缺德的迫害表情包吧。现在可以迫害的对象：唐可可, 上原步梦, 猛男狗, 令和, 鸭鸭, 陈睿                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| /prpr 嘉然                                                                                                                   | 小夜 舔了舔 嘉然 的 小嘴，我好兴奋啊!                                                                                                                         | 让小夜帮你舔 ta 吧。来自 jjbot 的功能                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| /qr 114514                                                                                                                   | [代表114514含义的二维码]                                                                                                                                      | 快速生成一个二维码，使用sumt的api。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 可以色色                                                                                                                     | [一张r18图]                                                                                                                                                   | 在危险的尺度下发送一张非法的 r18 二次元色图，图片来源api.lolicon.app。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 二次元                                                                                                                       | [一张随机二次元图]                                                                                                                                            | 发送一张正常尺度的二次元图。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 让我康康                                                                                                                     | [一张本地的随机图]                                                                                                                                            | 从本地图片文件夹随机发送图片，默认使用其他插件自动下载保存的图库文件夹.                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 随机网图                                                                                                                     | [一张随机网图]                                                                                                                                                | 从随机网络图源下载图片后发送图片，图源可以自定义，网上很多。                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| [某条消息重复了2次]                                                                                                          | [小夜复读了这条消息]                                                                                                                                          | 特殊插件，没有主动触发指令。当某条消息重复 2 次时，'小夜牌高保真复读机' 会跟风复读一次。                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| /roll                                                                                                                        | 你roll出了114514                                                                                                                                              | 随机 roll 出 0 到 1000000 的随机数，可以自行跟随参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 来点好的白丝                                                                                                                 | [一张健全的白丝图]                                                                                                                                            | 搜索一张指定tag的二次元图。`好的` 代表正常尺度，`坏的` 代表🈲。图片来源api.lolicon.app。                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 系统状态                                                                                                                     | [小夜的相关信息与系统当前的主要配置项]                                                                                                                        | 查询小夜的相关信息与系统当前的主要配置项                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 买家秀                                                                                                                       | [一张买家秀图]                                                                                                                                                | 在危险的尺度下发送一张非法的淘宝买家秀福利图。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 弹窗 您可能是盗版软件的受害者                                                                                                | [在宿主电脑弹出一个消息通知：'您可能是盗版软件的受害者']                                                                                                      | 自动在任务栏显示一个常驻托盘，仅在Windows系统下有效。弹窗指令会在小夜宿主电脑上弹出一条消息通知。                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| /吠 太好听了吧啊，你唱歌真的好嗷好听啊，简直就是天岸籁，我刚才听到你唱歌了，我们以后一起唱好不好，一起唱昂，一起做学园偶像昂 | [唐可可中文语音]                                                                                                                                              | 让小夜开口说话吧。小夜使用基于大数据的情感幼女语音合成技术，能吠出更自然的发音、更丰富的情感和更强大的表现力。可以插入一些棒读音以提高生草效果。                                                                                                                                                                                                                                                                                                                                                                                         |


### 仅在 qq 端 中生效的功能：

| 使用例                                      | 功能描述                                                                                                                                                                           |
| :------------------------------------------ | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 张菊@小夜                                   | 小夜的群服务开关。如果觉得小夜太吵了，想让小夜安静一会，那么在群里发 `闭菊` 即可关闭群内小夜的服务。`张菊@小夜` 为启用指定小夜的群服务。请勿光速一开一合调整菊部呼吸导致呼吸困难。 |
| 戳一戳                                      | 戳一戳小夜有利于身心健康。连续戳小夜 `3` 下就会生气把你禁言。                                                                                                                      |
| /孤寡 @孤寡对象                             | 七夕节快乐，小夜收到了你的孤寡订单，现在就开始孤寡 ta 辣！                                                                                                                         |
| 我有个朋友说我好了@Giftina                  | 小夜会 P 一张你朋友说的图。                                                                                                                                                        |
| /强制迫害 (@对象) (说了什么) (小夜说了什么) | 小夜转发了一段来自平行世界的对话，适度娱乐噢。                                                                                                                                     |
| [对某个消息回复复读]                        | 手动复读，小夜会复读回复中指定的消息。也许可以用来复现撤回的消息。                                                                                                                 |


### QQ 地 雷 战（需小夜是 QQ 群管理时有效）

| 使用例             | 功能描述                                                                                                                                                                                                                                                                       |
| :----------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 埋地雷             | 在群内埋下一坨极不稳定的地雷，有 30%的几率是掺了沙子的哑雷。在接下来的发言群员中会有一名幸运群友一脚踩到地雷，将会被炸伤 0 到 120 秒（禁言）。                                                                                                                                 |
| 踩地雷             | 觉得手雷和地雷都伤不到你，自带主角光环？还是说想当排雷步兵？不如来试试踩地雷吧！一脚踩到群友埋的地雷上，对你造成 60 到 240 秒的暴击伤害。                                                                                                                                      |
| 一个手雷 @被害者   | 向@被害者丢出一个手雷，一位幸运玩家将会被炸伤 0 到 120 秒（禁言）。有千分之一的概率手雷会转化为神圣手雷（Holly Hand Grenade），将会炸伤所有无辜群友（全体禁言）。                                                                                                              |
| 希望的花 @希望目标 | 团长，你在做什么啊！团长！朝 @希望目标 丢出一朵希望的花，救活目标（解除禁言），但是团长自己会被炸成重伤，造成 60 到 600 秒的暴击伤害。                                                                                                                                         |
| 击鼓传雷           | 小夜会传给你一个手雷，你必须在 60 秒内正确回答一个问题，不然就会在你手上爆炸噢。在回答正确之后，小夜会随机抽取一名幸运群友，把手雷传给 ta，ta 的回答时间是前一个玩家回答之后所剩的时间，依次类推，直到手雷在某个不幸群友手上爆炸。这是一个只有死亡才能结束的游戏，做好准备了吗 |
