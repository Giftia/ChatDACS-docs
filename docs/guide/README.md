# 使用说明

<table width="100%" border="0">
  <tr>
  <td style="width:80%;vertical-align:top;">
    <h1 align="center">
      <img src="https://repository-images.githubusercontent.com/171253757/27be1b16-8dbb-41ba-90b5-4b28157f3def" width="200" height="200" alt="ChatDACS"/><br/>
      星野夜蝶<br/>
      Hoshino Yedie<br/>
    </h1>
    <h2 align="center">
      沙雕Ai聊天系统 ChatDACS (Chatbot : shaDiao Ai Chat System)
    </h2>
    <p align="center">
      一个简单的机器人框架，支持接入哔哩哔哩直播，具备完全功能的web网页控制台。<br/>
      技术栈：语言 —— JavaScript，Web框架 —— Express，前端组件库 —— layui。<br/>
      画师：塘李<br/>
      <br/>
      示例 DEMO：<a href="http://110.42.221.72/" target="_blank">http://110.42.221.72/</a><br/>
      语录来自小夜：<a href="https://github.com/Giftia/Project_Xiaoye" target="_blank">github.com/Giftia/Project_Xiaoye</a>
      <br>
    </p>
  </td>

  <td style="width:20%;vertical-align:top;">
    <img src="https://i.loli.net/2021/08/25/sILl6XREJMDPAmt.png" width="200" alt="stand" />
    <p align="center">
      星野夜蝶 立绘
    </p>
  </td>
  </tr>
</table>

<p align="center">
  <a href="https://stats.uptimerobot.com/JYr8kI8jqg"><img src="https://img.shields.io/uptimerobot/ratio/m783632550-7da46d24226cb151b978c810?label=%E5%AD%98%E6%B4%BB%E7%8E%87&style=for-the-badge" alt="Uptime(30 days)" /></a>
  &nbsp;
  <a href="http://110.42.221.72/"><img src="https://img.shields.io/website?label=demo&style=for-the-badge&up_message=online&url=http://110.42.221.72/" alt="Demo" /></a>
  &nbsp;
  <a href="https://github.com/Giftia/ChatDACS/actions"><img alt="GitHub Workflow Status" src="https://img.shields.io/github/workflow/status/Giftia/ChatDACS/Compile%20ChatDACS%20for%20Windows?label=%E8%87%AA%E5%8A%A8%E6%9E%84%E5%BB%BA&style=for-the-badge"></a>
  &nbsp;
  <img src="https://img.shields.io/github/license/Giftia/ChatDACS?label=%E5%BC%80%E6%BA%90%E8%AE%B8%E5%8F%AF&style=for-the-badge" alt="License" />
  &nbsp;
  <img src="https://img.shields.io/github/languages/code-size/Giftia/ChatDACS?label=%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%B0%8F&style=for-the-badge" alt="Code size" />
</p>

---

## 😘 写在最前面 Hi

在线体验地址：[沙雕 Ai 聊天系统](http://110.42.221.72/)

如有任何疑问、建议或者需要联系我，请加官方 QQ 群 120243247：点击链接加入群聊【星野夜蝶 粉丝群】：https://jq.qq.com/?_wv=1027&k=ovqyydCe

对于普通用户，推荐您直接使用官方免费的公共小夜 QQ 账号：1648468212（不定时会被疼讯封号 7 天），邀请小夜入群即可，我会不定期批准请求。

你也可以加入交流群，群里有不少群友自发个人部署的第三方小夜，你可以申请使用群友搭建的小夜。

但更推荐您使用私人部署，私人部署的好处都有啥：

- 保护您的隐私，BOT 完全属于您，我无法得知您 BOT 的任何信息（我甚至无法知道您部署了一个私人 BOT）
- 高可用度，稳定的功能，不会因为公共小夜离线而无法运行；独立的词库，不会出现 ky 的回复
- 可自行定制 BOT 账号的头像、名字、配置，甚至是自己改造功能
- 减轻我的服务器负担，让公共小夜活得更久，可循环利用
- 通过搭建流程体验，学习一门先进的技术，很 cool，很极客

私人部署教程请点击跳转至 [部署说明](/deploy/) 章节。

---

## 💝 小夜的成长历程 History

小夜（Project_Xiaoye）是一个非盈利的用于娱乐的 QQ 机器人计划。由运营方 Giftina & NijiharaTsubasa 共同维护运营。运营使用的 QQ 是 小夜 `1648468274`。但是由于某些不可抗力导致小夜永久停止运营。所以随后启用了备用 QQ 小小夜 `1648468212` 接管运营。由于小夜和小小夜的思维核心（代码和数据）都是同一套，所以基本上相当于是无缝迁移过去了。

小夜的构思原型来源于当时另一个有趣的 QQ 机器人：丫丫（SoniaRobot），同一段时期还有不少优秀的伙伴，比如猫娘计划等等。小夜正式运营至今已经是第 7 个年头。 其中陆陆续续也收到了不少喜欢小夜的玩家的投食，让小夜得以运营了下去。小夜一大特色是开放的对话教学，并且在优秀的聊天算法加成下，养成了由 2w+用户调教练就的嘴臭词库，所以基本上小夜的日常就是怼天怼怼地怼空气。这也是不少玩家喜欢小夜的原因。因其毒舌的特点，经常会被玩家们亲切地称呼为夜爹。 感谢玩家的提议，这也是后来决定将小夜出道名定为 星野夜蝶 的原因。

在最开始的 V0 版本，小夜一直是以通过不断往里面塞社区共享的现成的插件为生。随着主要开发者 NijiharaTsubasa 的加入，我们将小夜移植到了神一般的 node.js 平台，进行了大规模的重写更新迭代，可以非常方便地自己来写插件添加功能了。在很长一段稳定运营期间，小夜由 V1 迭代到了 V3。但是这几代后端都是基于 qq 机器人框架酷 Q 框架进行开发的，由于 2020 年酷 Q 的停止运营，小夜不得不随之停止了运营。

停止运营后，作为对小夜玩家的弥补措施，我们上线了一个 web 版的小夜聊天界面 chatdacs.giftia.moe 以供玩家缅怀。在一段萎靡期后，我们试着在 web 版小夜的基础上与 go-cqhttp 进行了对接，作为重写的 V3 分支，并进行了运营测试，虽然这个分支代码因为是基于 web 版续写的所以写得很挫，发现运行效果相当不错。所以我们决定在小夜 V4 正式版本出来之前，暂时使用这个 V3 分支进行补偿性运营。

在运营了一段时间后，我们一拍脑袋决定安排小夜以昵称 星野夜蝶 作为 B 站虚拟主播出道。中之人由 [ACCESS DENINED] 和 小夜 同时担任。这个决定其实也是很久以前就有提议的。虽然这个提议基本上是闹着玩的，效果肯定也不会很好，而且也有很多做得更好的同类的产品如 [Bilibili-MagicalDanmaku](github.com/iwxyi/Bilibili-MagicalDanmaku) ，所以这个策划其实也是一次试水。敬请等待星野夜蝶爹的诞生吧。

星野夜蝶直播间：[https://live.bilibili.com/24230873](https://live.bilibili.com/24230873)

---

## ✨ 功能与特性 Features

- [x] 完善的 web 端聊天界面与各种奇奇怪怪的功能 `Nice H5 UI and some funny functions`
- [x] 无限制的在线聊天 `Unlimited chatroom`
- [x] 与经过 2w+ 用户调教养成的人工智能机器人小夜实时聊天 `Chat with Ai Xiaoye`
- [x] 令人激动的、实用的在线涩图功能 `🈲`
- [x] web 端图片、视频与文件分享 `Share your images, videos and files on webEnd`
- [x] 与 go-cqhttp 对接，实现了 qq 机器人小夜 `Connectable with go-cqhttp`
- [x] 简单好用的插件系统 `Easy Use Plugins System`
- [ ] 自定义表情包 `Use your own stickers`
- [ ] 私聊 `Private chat`

---

## 💬 功能介绍 Orders

### 在 web 端、qq 端、哔哩哔哩直播端 都通用的功能：

#### 聊天

##### 大家随心所欲地聊天吧~小夜会随时准备好嘴臭的！还有概率会随机复读噢。在消息里成功 `@小夜` 的时候，小夜回复几率会提高。

```shell
聊天回复率 `1%`，随机复读率 `1%`
```

- [x] 复读机

  - 当某条消息重复 `2` 次时小夜会跟风复读一次。

- [x] `/help` 或 `帮助` 或 `菜单` 或 `插件列表` 或 `说明`

  - 会回复系统当前可用插件列表，描述插件版本和对应的触发指令正则表达式。[体验正则表达式](https://regex101.com/)

- [x] `/ping`

  - 测试指令，用于测试小夜的连通性。

- [x] `问：关键词 答：小夜的回答`

  - 调教小夜说话吧！在优秀的聊天算法加成下，帮助养成由数万用户调教练就的嘴臭词库。当小夜收到含有关键词的语句时便会有几率触发回复，若该关键词有多个回复将会随机选择一个回复。支持图片问答。注意！冒号是中文全角的：，而不是英文半角的:，并且在 关键词 和 答：之间有一个空格。注意注意！如果像这样 “问：小夜的主人到底是谁呀 答：是你呀” 直接教完整的一句话的话是很难有效触发的，这就很考验你应该如何选择关键词了噢。像上面那个例子的话建议改成这样噢：“问：主人 答：是你呀”。
    - 使用例：`问：HELLO 答：WORLD`

- [x] `/说不出话 文字或者图片`

  - 教给小夜一些比较通用的回复。对于一些难以回复的对话，小夜的词库中没有搜索到回复的时候，小夜会随机回复这些回复，非常敷衍，回复了，但完全没有回复的意义。

- [x] `/status` 或 `/状态`

  - 查询小夜的版本以及小夜的相关信息。

- [x] `/吠 你好谢谢小笼包再见`

  - 让小夜开口说话吧。小夜使用基于大数据的情感幼女语音合成技术，能吠出更自然的发音、更丰富的情感和更强大的表现力。可以插入一些棒读音以提高生草效果。
    - 使用例：`/吠 太好听了吧啊，你唱歌真的好嗷好听啊，简直就是天岸籁，我刚才听到你唱歌了，我们以后一起唱好不好，一起唱昂，一起做学园偶像昂`

- [x] `/嘴臭 对话`

  - 小夜会通过语音来回应你的对话噢，还是要注意指令和对话之间要有个空格。

- [x] `/prpr 想pr的人`

  - 让小夜帮你舔 ta 吧。

- [x] `/今日不带套`

  - 七夕节快乐，让小夜帮你计算今天不带套的结果。

- [x] `/画师算命`
  - 一个简单的 avg 小说，可以自由二次扩展开发。
- [x] `/迫害 [迫害对象] (迫害文字)`

  - 让小夜来制作缺德的迫害表情包吧。现在可以迫害的对象：["唐可可", "上原步梦", "猛男狗", "令和", "鸭鸭", "陈睿"]
    - 使用例：`/迫害 上原步梦 是我，是我先，明明都是我先来的……接吻也好，拥抱也好，还是喜欢上那家伙也好。`

- [x] `/cp 攻 受`

  - 让小夜生成一段简单的 cp 文。简简单单，就是最好的爱。
    - 使用例：`/cp 小夜 小雫`

- [x] `赛博朋克`

  - 非常赛博朋克的百科知识问答题。

- [x] `/报错 (报错内容)`

  - 向小夜开发组反馈消息，消息会实时转达到小夜开发成员。

- [x] `qr (内容)`

  - 让小夜帮你快速生成一个二维码。

- [x] `/黑白图 (图片) (第一排文字) (第二排文字)`

  - 让小夜帮你生成一张黑白生草图。

- [x] `人生重开`

  - 风靡全球的人生重开小游戏，数据来自 https://github.com/VickScarlet/lifeRestart 。真实版本。

- [x] `/roll`

  - 随机 roll 出 0 到 1000000 的随机数，可以自行跟随参数。

- [x] `BV19q4y1c7K4`

  - 哔哩哔哩 BV 解析，返回 av 号和标题。

- [x] `提醒我晚上手冲`

  - 将指定格式的消息推送至微信息知指定频道，适合传送消息至微信。

- [x] `弹窗 该手冲了`

  - 会在小夜宿主电脑上弹出一条消息通知。

- [x] `cos图` 或 `cosplay`

  - 在普通限度的尺度下让小夜发一张合法的 cos 图。

- [x] `买家秀` 或 `福利姬`

  - 在无限度的尺度下让小夜发一张非法的买家秀福利图，危险注意！

- [x] `二次元`

  - 在普通限度的尺度下让小夜发一张合法的二次元图。

- [x] `r18` 或 `可以色色` 或 `色、涩、瑟图`

  - 在无限度的尺度下让小夜发一张非法的二次元图，超危险注意！

- [x] `来点xx` 或 `来点好的xx` 或 `来点坏的xx`

  - 让小夜搜索一张指定 tag 的二次元图，xx 即你想搜索的 tag。
  - `好的` 代表正常尺度，`坏的` 代表 🈲，超危险注意！

- [x] `让我看看` 或 `图来`

  - 从本地图片文件夹随机发送图片，默认使用其他插件自动下载保存的图库文件夹。

- [x] `随机网图`

  - 发送一张从随机网络图源获取的图片，图源可以自定义，网上很多。

- [x] `猫语 阿巴巴`

  - 可以将文本加密为 `喵嗷呜` 格式的喵语，也可将喵语解密成原始文本。原作 https://github.com/ezshine/chrome-extension-catroom
    - 解密不需要猫语前缀，直接发送即可。

- [x] `名场面 不能逃避`

  - 根据字幕台词搜索名场面出处，原作：https://github.com/windrises/dialogue.moe

- [x] `最新本子`

  - 从 https://cangku.icu/feed 获取最新投稿

- 仅在 qq 端 中生效的功能：

  - [x] `张菊@小夜` 与 `闭菊`

    - 小夜的群服务开关。如果觉得小夜太吵了，想让小夜安静一会，那么在群里发 `闭菊` 即可关闭群内小夜的服务。`张菊@小夜` 为启用指定小夜的群服务。请勿光速一开一合调整菊部呼吸导致呼吸困难。

  - [x] `戳一戳`

    - 戳一戳小夜有利于身心健康。连续戳小夜 `3` 下就会生气把你禁言。

  - [x] `/孤寡 @孤寡对象`

    - 七夕节快乐，小夜收到了你的孤寡订单，现在就开始孤寡 ta 辣！

  - [x] `我有个朋友说(我有个朋友)[@谁]`

    - 小夜会 P 一张你朋友说的图。
      - 使用例：`我有个朋友说我好了@Giftina`

  - [x] `/强制迫害 (@对象) (说了什么) (小夜说了什么)`

    - 小夜转发了一段来自平行世界的对话，适度娱乐噢。

  - QQ 地 雷 战（需小夜是群管理时有效）

    - [x] `埋地雷`
      - 一个有趣的小游戏，在群内埋下一坨极不稳定的地雷，有 30%的几率是掺了沙子的哑雷。在接下来的发言群员中会有一名幸运群友一脚踩到地雷，将会被炸伤 0 到 120 秒（禁言）。
    - [x] `踩地雷`
      - 觉得手雷和地雷都伤不到你，自带主角光环？还是说想当排雷步兵？不如来试试踩地雷吧！一脚踩到群友埋的地雷上，对你造成 60 到 240 秒的暴击伤害。
    - [x] `一个手雷 @被害者`
      - 一个有趣的小游戏，向@被害者丢出一个手雷，一位幸运玩家将会被炸伤 0 到 120 秒（禁言）。有千分之一的概率手雷会转化为神圣手雷（Holly Hand Grenade），将会炸伤所有无辜群友（全体禁言）。
    - [x] `希望的花 @希望目标`
      - 团长，你在做什么啊！团长！朝 @希望目标 丢出一朵希望的花，救活目标（解除禁言），但是团长自己会被炸成重伤，造成 60 到 600 秒的暴击伤害。
    - [x] `击鼓传雷`
      - 小夜会传给你一个手雷，你必须在 60 秒内尽快正确回答一个问题，不然就会在你手上爆炸噢。在回答正确之后，小夜会随机抽取一名幸运群友，把手雷传给 ta，ta 的回答时间将会是前一个玩家回答之后所剩的时间，依次类推，直到手雷在某个不幸群友手上爆炸才结束。这是一个只有死亡才能结束的游戏，做好准备了吗。
